webpackJsonp([10],{"/Dbz":function(s,a){},RNUc:function(s,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("section",{staticClass:"content markdown-doc"},[t("h2",{attrs:{id:"webpack-gou-jian-gong-ju--gao-ji"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack-gou-jian-gong-ju--gao-ji"}},[s._v("#")]),s._v(" webpack构建工具-高级")]),s._v(" "),t("h2",{attrs:{id:"sourcemap-yuan-dai-ma-dao-gou-jian-dai-ma-de-ying-she-ji-zhu"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sourcemap-yuan-dai-ma-dao-gou-jian-dai-ma-de-ying-she-ji-zhu"}},[s._v("#")]),s._v(" sourceMap源代码到构建代码的映射技术")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("source-map")]),s._v(" 外部map文件，提示错误信息精确到源码行列")]),s._v(" "),t("li",[t("code",[s._v("inline-source-map")]),s._v(" 内联map文件在每个构建文件尾部生成map，提示错误信息精确到源码行列")]),s._v(" "),t("li",[t("code",[s._v("eval-source-map")]),s._v(" 内联map文件，在构建文件的每个eval的构建函数中，提示错误信息精确到源码行列")]),s._v(" "),t("li",[t("code",[s._v("hidden-source-map")]),s._v(" 外部map文件，提示错误信息不匹配源码位置")]),s._v(" "),t("li",[t("code",[s._v("nosources-source-map")]),s._v(" 外部map文件，提示错误信息，不提供源码")]),s._v(" "),t("li",[t("code",[s._v("cheap-source-map")]),s._v(" 外部map文件，提示错误信息，精确到源码行")]),s._v(" "),t("li",[t("code",[s._v("cheap-module-source-map")]),s._v(" 外部map文件，提示错误信息精确到源码行列")])]),s._v(" "),t("p",[s._v("构建速度")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("eval-cheap-souce-map")])]),s._v(" "),t("li",[t("code",[s._v("eval-souce-map")])])]),s._v(" "),t("p",[s._v("调试")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("souce-map")])]),s._v(" "),t("li",[t("code",[s._v("cheap-module-souce-map")])]),s._v(" "),t("li",[t("code",[s._v("cheap-souce-map")])])]),s._v(" "),t("h2",{attrs:{id:"oneof-wen-jian-pi-pei-dan-yiloader"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#oneof-wen-jian-pi-pei-dan-yiloader"}},[s._v("#")]),s._v(" oneOf文件匹配单一loader")]),s._v(" "),t("ul",[t("li",[s._v("注意oneOf中不允许多项配置配置同类文件")])]),s._v(" "),t("pre",{staticClass:"hljs"},[t("code",[t("span",{staticClass:"hljs-built_in"},[s._v("module")]),s._v(": {\n  "),t("span",{staticClass:"hljs-attr"},[s._v("rules")]),s._v(": [\n    {\n      "),t("span",{staticClass:"hljs-attr"},[s._v("oneOf")]),s._v(": [\n        {\n          "),t("span",{staticClass:"hljs-attr"},[s._v("test")]),s._v(": "),t("span",{staticClass:"hljs-regexp"},[s._v("/\\.css$/")]),s._v(",\n          "),t("span",{staticClass:"hljs-attr"},[s._v("use")]),s._v(": ["),t("span",{staticClass:"hljs-string"},[s._v("'style-loader'")]),s._v(", "),t("span",{staticClass:"hljs-string"},[s._v("'css-loader'")]),s._v("]\n        },\n        ...\n      ]\n    }\n  ]\n}\n")])]),t("h2",{attrs:{id:"hash-zhi"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hash-zhi"}},[s._v("#")]),s._v(" hash值")]),s._v(" "),t("ul",[t("li",[s._v("hash： webpack打包时候生成的hash")]),s._v(" "),t("li",[s._v("chunkhash：根据chunk生成hash值，如果打包来源同一个chunk（入口文件），hash值就一样")]),s._v(" "),t("li",[s._v("contenthash：根据文件内容生成hash,不同文件hash不一样")])]),s._v(" "),t("h2",{attrs:{id:"tree-shaking-qu-chu-wu-yong-dai-ma"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tree-shaking-qu-chu-wu-yong-dai-ma"}},[s._v("#")]),s._v(" tree shaking去除无用代码")]),s._v(" "),t("ul",[t("li",[s._v("打包会自动去除没有使用的代码")]),s._v(" "),t("li",[s._v("必须使用ES6模块化")]),s._v(" "),t("li",[s._v("开启production环境")])]),s._v(" "),t("pre",{staticClass:"hljs"},[t("code",[t("span",{staticClass:"hljs-comment"},[s._v("// package.json")]),s._v("\n"),t("span",{staticClass:"hljs-string"},[s._v('"sideEffects"')]),s._v(": "),t("span",{staticClass:"hljs-literal"},[s._v("false")]),s._v(" "),t("span",{staticClass:"hljs-comment"},[s._v("// 所有代码都可进行tree shaking")]),s._v("\n"),t("span",{staticClass:"hljs-string"},[s._v('"sideEffects"')]),s._v(": ["),t("span",{staticClass:"hljs-string"},[s._v('"*.css"')]),s._v("] "),t("span",{staticClass:"hljs-comment"},[s._v("// 屏蔽css文件不进行tree shaking")]),s._v("\n")])]),t("h2",{attrs:{id:"code-split-dai-ma-fen-ge"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#code-split-dai-ma-fen-ge"}},[s._v("#")]),s._v(" code split代码分割")]),s._v(" "),t("ul",[t("li",[s._v("多入口")])]),s._v(" "),t("pre",{staticClass:"hljs"},[t("code",[s._v("entry: {\n  "),t("span",{staticClass:"hljs-attr"},[s._v("demo1")]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v("'demo1.js'")]),s._v(",\n  "),t("span",{staticClass:"hljs-attr"},[s._v("demo2")]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v("'demo2.js'")]),s._v(",\n}\n")])]),t("ul",[t("li",[s._v("单独打包mode_modules打包成chunk")])]),s._v(" "),t("pre",{staticClass:"hljs"},[t("code",[s._v("optimization: {\n  "),t("span",{staticClass:"hljs-attr"},[s._v("splitChunks")]),s._v(": {\n    "),t("span",{staticClass:"hljs-attr"},[s._v("chunks")]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v("'all'")]),s._v("\n  }\n}\n")])]),t("ul",[t("li",[s._v("import懒加载导入语法")])]),s._v(" "),t("pre",{staticClass:"hljs"},[t("code",[t("span",{staticClass:"hljs-comment"},[s._v("// /* webpackChunkName: 'test' */ -> 告诉webpack这个模块打包名字")]),s._v("\n"),t("span",{staticClass:"hljs-comment"},[s._v("// /* webpackPrefetch: true  */ -> 告诉weboack预先加载该资源，浏览器空闲加载")]),s._v("\n"),t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v("("),t("span",{staticClass:"hljs-comment"},[s._v("/* webpackChunkName: 'test', webpackPrefetch: true */")]),t("span",{staticClass:"hljs-string"},[s._v("'./test'")]),s._v(").then().catch()\n")])]),t("h2",{attrs:{id:"pwa-jian-jin-shi-wang-luo-kai-fa-ying-yong-cheng-xu-chi-xian-ke-fang-wen"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pwa-jian-jin-shi-wang-luo-kai-fa-ying-yong-cheng-xu-chi-xian-ke-fang-wen"}},[s._v("#")]),s._v(" PWA渐进式网络开发应用程序（离线可访问）")]),s._v(" "),t("ul",[t("li",[s._v("work-webpack-plugin")]),s._v(" "),t("li",[s._v("需要注册serviceworker")]),s._v(" "),t("li",[s._v("存在兼容性问题")])]),s._v(" "),t("pre",{staticClass:"hljs"},[t("code",[t("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" WorkWebpackPlugin = "),t("span",{staticClass:"hljs-built_in"},[s._v("require")]),s._v("("),t("span",{staticClass:"hljs-string"},[s._v("'work-webpack-plugin'")]),s._v(")\n"),t("span",{staticClass:"hljs-attr"},[s._v("plugins")]),s._v(": [\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" WorkWebpackPlugin.GenerateSW({ "),t("span",{staticClass:"hljs-comment"},[s._v("// 默认会创建一个html文件，引入打包输出的所有资源")]),s._v("\n  "),t("span",{staticClass:"hljs-attr"},[s._v("clientsClaim")]),s._v(": "),t("span",{staticClass:"hljs-literal"},[s._v("true")]),s._v(", "),t("span",{staticClass:"hljs-comment"},[s._v("// 帮助serviceWorker快速启动，删除旧的serviceworker")]),s._v("\n  "),t("span",{staticClass:"hljs-attr"},[s._v("skipWaiting")]),s._v(": "),t("span",{staticClass:"hljs-literal"},[s._v("true")]),s._v("\n  })\n]\n\n"),t("span",{staticClass:"hljs-comment"},[s._v("// 入口文件")]),s._v("\n"),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" ("),t("span",{staticClass:"hljs-string"},[s._v("'serviceWorker'")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("in")]),s._v(" navigator) {\n  "),t("span",{staticClass:"hljs-built_in"},[s._v("window")]),s._v(".addEventListener("),t("span",{staticClass:"hljs-string"},[s._v("'load'")]),s._v(", () => {\n    "),t("span",{staticClass:"hljs-comment"},[s._v("// 注册serviceWorker")]),s._v("\n    navigator.serviceWorker.register("),t("span",{staticClass:"hljs-string"},[s._v("'./service-worker.js'")]),s._v(").then().catch()\n  })\n}\n")])]),t("h2",{attrs:{id:"thread-loader-duo-jin-cheng-da-bao"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#thread-loader-duo-jin-cheng-da-bao"}},[s._v("#")]),s._v(" thread-loader多进程打包")]),s._v(" "),t("ul",[t("li",[s._v("将此loader放置于其他loader解析后，开启多进程打包")]),s._v(" "),t("li",[s._v("进程开启需要时间")]),s._v(" "),t("li",[s._v("进程通信需要时间")])]),s._v(" "),t("pre",{staticClass:"hljs"},[t("code",[t("span",{staticClass:"hljs-built_in"},[s._v("module")]),s._v(": {\n  "),t("span",{staticClass:"hljs-attr"},[s._v("rules")]),s._v(": [\n    {\n      "),t("span",{staticClass:"hljs-attr"},[s._v("test")]),s._v(": "),t("span",{staticClass:"hljs-regexp"},[s._v("/\\.js$/")]),s._v(",\n      "),t("span",{staticClass:"hljs-attr"},[s._v("use")]),s._v(": [\n        "),t("span",{staticClass:"hljs-comment"},[s._v("// npm i thread-loader -D")]),s._v("\n        {\n          "),t("span",{staticClass:"hljs-attr"},[s._v("loader")]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v("'thread-loader'")]),s._v(",\n          "),t("span",{staticClass:"hljs-attr"},[s._v("options")]),s._v(": {\n            "),t("span",{staticClass:"hljs-attr"},[s._v("workers")]),s._v(": "),t("span",{staticClass:"hljs-number"},[s._v("2")]),s._v(" "),t("span",{staticClass:"hljs-comment"},[s._v("// 规定进程数")]),s._v("\n          }\n        },\n        {\n          "),t("span",{staticClass:"hljs-comment"},[s._v("// npm i babel-loader -D")]),s._v("\n          "),t("span",{staticClass:"hljs-attr"},[s._v("loader")]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v("'babel-loader'")]),s._v(",\n          "),t("span",{staticClass:"hljs-attr"},[s._v("exclude")]),s._v(": "),t("span",{staticClass:"hljs-regexp"},[s._v("/node_modules/")]),s._v(", "),t("span",{staticClass:"hljs-comment"},[s._v("// 排除不需要检查的文件")]),s._v("\n          "),t("span",{staticClass:"hljs-attr"},[s._v("options")]),s._v(": { "),t("span",{staticClass:"hljs-comment"},[s._v("// loader的一般配置")]),s._v("\n            "),t("span",{staticClass:"hljs-comment"},[s._v("// npm i @babel/preset-env -D")]),s._v("\n            "),t("span",{staticClass:"hljs-comment"},[s._v("// 预设，指示babel做怎么样的兼容处理")]),s._v("\n            "),t("span",{staticClass:"hljs-attr"},[s._v("presets")]),s._v(": [\n                "),t("span",{staticClass:"hljs-string"},[s._v("'@babel/preset-env'")]),s._v("，\n                {\n                  "),t("span",{staticClass:"hljs-comment"},[s._v("// 按需加载兼容性处理")]),s._v("\n                  "),t("span",{staticClass:"hljs-attr"},[s._v("useBuiltIns")]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v("'usage'")]),s._v(",\n                  "),t("span",{staticClass:"hljs-comment"},[s._v("// 指定core-js版本")]),s._v("\n                  "),t("span",{staticClass:"hljs-attr"},[s._v("corejs")]),s._v(": {\n                    "),t("span",{staticClass:"hljs-attr"},[s._v("version")]),s._v(": "),t("span",{staticClass:"hljs-number"},[s._v("3")]),s._v("\n                  },\n                  "),t("span",{staticClass:"hljs-comment"},[s._v("// 指定兼容性做到哪个版本浏览器")]),s._v("\n                  "),t("span",{staticClass:"hljs-attr"},[s._v("targets")]),s._v(": {\n                    "),t("span",{staticClass:"hljs-attr"},[s._v("chorme")]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v("'60'")]),s._v(",\n                    "),t("span",{staticClass:"hljs-attr"},[s._v("ie")]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v("'9'")]),s._v(",\n                    "),t("span",{staticClass:"hljs-attr"},[s._v("firefox")]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v("'60'")]),s._v("\n                    ...\n                  },\n                  "),t("span",{staticClass:"hljs-attr"},[s._v("cacheDirectory")]),s._v(": "),t("span",{staticClass:"hljs-literal"},[s._v("true")]),s._v(" "),t("span",{staticClass:"hljs-comment"},[s._v("// 开启babel缓存，第二次构建时，读取缓存 ")]),s._v("\n                }\n              ]\n          }\n        }\n      ]\n      \n    }\n  ]\n}\n\n"),t("span",{staticClass:"hljs-comment"},[s._v("// packgage.json")]),s._v("\n"),t("span",{staticClass:"hljs-string"},[s._v('"eslintConfig"')]),s._v(": {\n  "),t("span",{staticClass:"hljs-string"},[s._v('"extends"')]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v('"airbnb-base"')]),s._v("\n}\n")])]),t("h2",{attrs:{id:"externals-hu-luenpm-bao"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#externals-hu-luenpm-bao"}},[s._v("#")]),s._v(" externals忽略npm包")]),s._v(" "),t("pre",{staticClass:"hljs"},[t("code",[s._v("externals: {\n  "),t("span",{staticClass:"hljs-attr"},[s._v("jquery")]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v("'jQuery'")]),s._v("\n}\n")])]),t("h2",{attrs:{id:"dll-dong-tai-lian-jie-ku"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dll-dong-tai-lian-jie-ku"}},[s._v("#")]),s._v(" dll动态链接库")]),s._v(" "),t("ul",[t("li",[s._v("将三方库打包成另外的chunk")]),s._v(" "),t("li",[s._v("需新建另外一个js配置-webpack.dll.js")]),s._v(" "),t("li",[s._v("webpack --config webpack.dll.js")])]),s._v(" "),t("pre",{staticClass:"hljs"},[t("code",[t("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" webpack = "),t("span",{staticClass:"hljs-built_in"},[s._v("require")]),s._v("("),t("span",{staticClass:"hljs-string"},[s._v("'webpack'")]),s._v(")\n"),t("span",{staticClass:"hljs-built_in"},[s._v("module")]),s._v(".exports = {\n  "),t("span",{staticClass:"hljs-attr"},[s._v("entry")]),s._v(": {\n    "),t("span",{staticClass:"hljs-comment"},[s._v("// name: 打包的库")]),s._v("\n    "),t("span",{staticClass:"hljs-attr"},[s._v("jqyery")]),s._v(": ["),t("span",{staticClass:"hljs-string"},[s._v("'jquery'")]),s._v(", ...]\n  },\n  "),t("span",{staticClass:"hljs-attr"},[s._v("output")]),s._v(": {\n    "),t("span",{staticClass:"hljs-attr"},[s._v("filename")]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v("'[name],js'")]),s._v(",\n    "),t("span",{staticClass:"hljs-attr"},[s._v("path")]),s._v(": resolve(__dirname, "),t("span",{staticClass:"hljs-string"},[s._v("'dll'")]),s._v("),\n    "),t("span",{staticClass:"hljs-attr"},[s._v("library")]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v("'[name]_[hash]'")]),s._v(" "),t("span",{staticClass:"hljs-comment"},[s._v("// 打包的库暴露出去的内容命名")]),s._v("\n  },\n  "),t("span",{staticClass:"hljs-attr"},[s._v("plugins")]),s._v(": [\n    "),t("span",{staticClass:"hljs-comment"},[s._v("// 打包生成一个mainfest.json提供映射关系")]),s._v("\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" webpack.DllPlugin({\n      "),t("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v("'[name]_[hash],'")]),s._v(" "),t("span",{staticClass:"hljs-comment"},[s._v("// 映射库暴露的内容")]),s._v("\n      "),t("span",{staticClass:"hljs-attr"},[s._v("path")]),s._v(": resolve(__dirname, "),t("span",{staticClass:"hljs-string"},[s._v("'dll/mainfest.json'")]),s._v(") "),t("span",{staticClass:"hljs-comment"},[s._v("// 输出路径")]),s._v("\n    })\n  ]\n}\n")])]),t("ul",[t("li",[s._v("webpack.config.js")])]),s._v(" "),t("pre",{staticClass:"hljs"},[t("code",[t("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" webpack = "),t("span",{staticClass:"hljs-built_in"},[s._v("require")]),s._v("("),t("span",{staticClass:"hljs-string"},[s._v("'webpack'")]),s._v(")\n"),t("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" AddAssetHtmlWebpackPlugin = "),t("span",{staticClass:"hljs-built_in"},[s._v("require")]),s._v("("),t("span",{staticClass:"hljs-string"},[s._v("'add-asset-html-webpack-plugin'")]),s._v(")\n"),t("span",{staticClass:"hljs-attr"},[s._v("plugins")]),s._v(": [\n  "),t("span",{staticClass:"hljs-comment"},[s._v("// 告诉webpack那些库不用打包，并用哪些配置")]),s._v("\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" webpack.DllReferencePlugin({\n    "),t("span",{staticClass:"hljs-attr"},[s._v("manifest")]),s._v(": resolve(__dirname, "),t("span",{staticClass:"hljs-string"},[s._v("'dll/mainfest.json'")]),s._v(")\n  }),\n  "),t("span",{staticClass:"hljs-comment"},[s._v("// 将某个文件打包输出并在html中自动引入")]),s._v("\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" AddAssetHtmlWebpackPlugin({\n    "),t("span",{staticClass:"hljs-attr"},[s._v("filepath")]),s._v(": resolve(__dirname, "),t("span",{staticClass:"hljs-string"},[s._v("'dll/jquery.js'")]),s._v(")\n  })\n]\n")])])])}]};var l={data:function(){return{}},mounted:function(){},components:{Markdown:t("VU/8")(null,n,!1,function(s){t("zTha")},"data-v-94c37912",null).exports}},e={render:function(){var s=this.$createElement,a=this._self._c||s;return a("div",{staticClass:"markdown"},[a("Markdown")],1)},staticRenderFns:[]};var i=t("VU/8")(l,e,!1,function(s){t("/Dbz")},"data-v-77c4cb87",null);a.default=i.exports},w5pk:function(s,a,t){(s.exports=t("FZ+f")(!1)).push([s.i,"",""])},zTha:function(s,a,t){var n=t("w5pk");"string"==typeof n&&(n=[[s.i,n,""]]),n.locals&&(s.exports=n.locals);t("rjj0")("2627adff",n,!0,{})}});