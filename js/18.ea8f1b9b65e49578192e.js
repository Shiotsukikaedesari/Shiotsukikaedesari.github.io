webpackJsonp([18],{"6UlS":function(s,t,a){(s.exports=a("FZ+f")(!1)).push([s.i,"",""])},"9NuB":function(s,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={render:function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("section",{staticClass:"content markdown-doc"},[s._m(0),s._v(" "),a("p",[s._v("本文档只记录与Vue2.x区别，与Vue3.0新特性")]),s._v(" "),s._m(1),s._v(" "),s._m(2),s._v(" "),s._m(3),s._v(" "),a("p",[s._v("是一个新的组件选项。作为在组件内使用 Composition API 的入口点。")]),s._v(" "),s._m(4),s._v(" "),a("p",[s._v("它会在 beforeCreate 钩子之前被调用")]),s._v(" "),s._m(5),s._v(" "),s._m(6),s._v(" "),s._m(7),s._m(8),s._v(" "),s._m(9),s._v(" "),a("pre",{staticClass:"hljs"},[a("code",[s._m(10),s._v("\n  "),s._m(11),s._v(s._s(s.count)),s._m(12),s._v("\n"),s._m(13),s._v("\n\n"),s._m(14),s._m(15),s._m(16),s._v("\n")])]),s._m(17),s._v(" "),s._m(18),s._v(" "),s._m(19),s._v(" "),s._m(20),s._m(21),s._v(" "),s._m(22),s._m(23),s._v(" "),s._m(24),s._v(" "),s._m(25),s._m(26),s._v(" "),a("p",[s._v("可以用来为一个 reactive 对象的属性创建一个 ref。这个 ref 可以被传递并且能够保持响应性。也可将 prop 中的属性作为 ref 。")]),s._v(" "),s._m(27),s._m(28),s._m(29),s._v(" "),a("p",[s._v("把一个响应式对象转换成普通对象，该普通对象的每个 property 都是一个 ref ，和响应式对象 property 一一对应。")]),s._v(" "),s._m(30),s._m(31),s._v(" "),a("p",[s._v("接受普通对象，返回响应式对象。")]),s._v(" "),s._m(32),s._v(" "),s._m(33),s._m(34),s._v(" "),s._m(35),s._m(36),s._v(" "),s._m(37),s._v(" "),s._m(38),s._v(" "),s._m(39),s._m(40),s._v(" "),s._m(41),s._m(42),s._v(" "),a("p",[s._v("立即执行传入的函数，并响应式追踪其依赖，并在其依赖变更时重新运行该函数与vue2.x的watch类似。")]),s._v(" "),s._m(43),s._m(44),s._v(" "),s._m(45),s._v(" "),s._m(46),s._v(" "),s._m(47),s._m(48),s._v(" "),s._m(49),s._m(50),s._v(" "),s._m(51),s._m(52),s._v(" "),s._m(53),s._m(54),s._v(" "),a("p",[s._v("默认情况下，将在组件更新后执行副作用。（flush: 'post'）")]),s._v(" "),s._m(55),s._m(56),s._v(" "),a("p",[s._v("将监听器赋值给一个变量会返回一个停止监听方法。")]),s._v(" "),s._m(57),s._v(" "),s._m(58),s._m(59),s._v(" "),s._m(60),s._m(61),s._v(" "),s._m(62),s._v(" "),s._m(63),s._m(64),s._v(" "),s._m(65),s._m(66),s._v(" "),s._m(67),s._v(" "),s._m(68),s._m(69),s._v(" "),s._m(70),s._v(" "),s._m(71),s._m(72),s._v(" "),s._m(73),s._v(" "),s._m(74),s._v(" "),s._m(75),s._v(" "),s._m(76),s._v(" "),s._m(77),s._v(" "),s._m(78)])},staticRenderFns:[function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"vue3.0--ji-chu"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vue3.0--ji-chu"}},[this._v("#")]),this._v(" Vue3.0-基础")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"guan-fang-wen-dang-di-zhi"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#guan-fang-wen-dang-di-zhi"}},[this._v("#")]),this._v(" 官方文档地址")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("a",{attrs:{href:"https://vue-composition-api-rfc.netlify.app/zh/api.html#setup"}},[this._v("https://vue-composition-api-rfc.netlify.app/zh/api.html#setup")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"setup"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setup"}},[this._v("#")]),this._v(" setup")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h4",{attrs:{id:"diao-yong-shi-ji"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#diao-yong-shi-ji"}},[this._v("#")]),this._v(" 调用时机")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h4",{attrs:{id:"ru-can"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ru-can"}},[this._v("#")]),this._v(" 入参")])},function(){var s=this.$createElement,t=this._self._c||s;return t("ul",[t("li",[this._v("props 组件的props对象")]),this._v(" "),t("li",[this._v("context定义setup所处的上下文，也就是Vue2.x中需要用this访问的对象")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" {\n  "),a("span",{staticClass:"hljs-attr"},[s._v("props")]),s._v(": {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("demo1")]),s._v(": "),a("span",{staticClass:"hljs-built_in"},[s._v("String")]),s._v("\n  },\n  "),a("span",{staticClass:"hljs-attr"},[s._v("data")]),s._v(": () {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("demo2")]),s._v(": "),a("span",{staticClass:"hljs-number"},[s._v("1")]),s._v("\n  },\n  setup(props, context) {\n    "),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(props.demo1)\n    "),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(context.attrs)\n    "),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(context.ref)\n    "),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(context.slots)\n  }\n}\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"ref"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ref"}},[this._v("#")]),this._v(" ref")])},function(){var s=this.$createElement,t=this._self._c||s;return t("ul",[t("li",[this._v("根据给定的值创建响应式数据对象，函数调用返回值是一个对象，仅包含一个"),t("code",[this._v(".value")]),this._v("属性。")]),this._v(" "),t("li",[this._v("在setup之外无需用"),t("code",[this._v(".value")]),this._v("形式访问值，可直接访问。")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("span",{staticClass:"hljs-tag"},[this._v("<"),t("span",{staticClass:"hljs-name"},[this._v("template")]),this._v(">")])},function(){var s=this.$createElement,t=this._self._c||s;return t("span",{staticClass:"hljs-tag"},[this._v("<"),t("span",{staticClass:"hljs-name"},[this._v("div")]),this._v(">")])},function(){var s=this.$createElement,t=this._self._c||s;return t("span",{staticClass:"hljs-tag"},[this._v("</"),t("span",{staticClass:"hljs-name"},[this._v("div")]),this._v(">")])},function(){var s=this.$createElement,t=this._self._c||s;return t("span",{staticClass:"hljs-tag"},[this._v("</"),t("span",{staticClass:"hljs-name"},[this._v("template")]),this._v(">")])},function(){var s=this.$createElement,t=this._self._c||s;return t("span",{staticClass:"hljs-tag"},[this._v("<"),t("span",{staticClass:"hljs-name"},[this._v("script")]),this._v(">")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("span",{staticClass:"javascript"},[s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" {\n  setup(props, context) {\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" count = ref("),a("span",{staticClass:"hljs-number"},[s._v("0")]),s._v(")\n    "),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(count.value) "),a("span",{staticClass:"hljs-comment"},[s._v("// 0")]),s._v("\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" {\n      count\n    }\n  }\n}\n")])},function(){var s=this.$createElement,t=this._self._c||s;return t("span",{staticClass:"hljs-tag"},[this._v("</"),t("span",{staticClass:"hljs-name"},[this._v("script")]),this._v(">")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"template-refs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#template-refs"}},[this._v("#")]),this._v(" template refs")])},function(){var s=this.$createElement,t=this._self._c||s;return t("ul",[t("li",[this._v("template中的ref已经与ref统一了。")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h4",{attrs:{id:"dom"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dom"}},[this._v("#")]),this._v(" dom")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[s._v("<template>\n  "),a("span",{staticClass:"xml"},[a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("div")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("ref")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"root"')]),s._v(">")]),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("div")]),s._v(">")])]),s._v("\n"),a("span",{staticClass:"xml"},[a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("template")]),s._v(">")])]),s._v("\n\n"),a("span",{staticClass:"xml"},[a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(">")]),a("span",{staticClass:"javascript"},[s._v("\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" {\n    setup() {\n      "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" root = ref("),a("span",{staticClass:"hljs-literal"},[s._v("null")]),s._v(")\n\n      onMounted("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" =>")]),s._v(" {\n        "),a("span",{staticClass:"hljs-comment"},[s._v("// 在渲染完成后, 这个 div DOM 会被赋值给 root ref 对象")]),s._v("\n        "),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(root.value) "),a("span",{staticClass:"hljs-comment"},[s._v("// <div/>")]),s._v("\n      })\n\n      "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" {\n        root,\n      }\n    },\n  }\n")]),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(">")])]),s._v("\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h4",{attrs:{id:"zu-jian"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zu-jian"}},[this._v("#")]),this._v(" 组件")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[s._v("<template>\n  "),a("span",{staticClass:"xml"},[a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("demo")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("ref")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"root"')]),s._v(">")]),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("demo")]),s._v(">")])]),s._v("\n"),a("span",{staticClass:"xml"},[a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("template")]),s._v(">")])]),s._v("\n\n"),a("span",{staticClass:"xml"},[a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(">")]),a("span",{staticClass:"javascript"},[s._v("\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" {\n    setup() {\n      "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" root = ref("),a("span",{staticClass:"hljs-literal"},[s._v("null")]),s._v(")\n\n      onMounted("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" =>")]),s._v(" {\n        "),a("span",{staticClass:"hljs-comment"},[s._v("// 在渲染完成后, 这个 vueComponent对象会被赋值给 root ref 对象")]),s._v("\n        "),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(root.value.count) "),a("span",{staticClass:"hljs-comment"},[s._v("// vueComponent.count")]),s._v("\n      })\n\n      "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" {\n        root,\n      }\n    },\n  }\n")]),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(">")])]),s._v("\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h4",{attrs:{id:"isref"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#isref"}},[this._v("#")]),this._v(" isRef")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("判断变量是否由"),t("code",[this._v("ref")]),this._v("创建。")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("let")]),s._v(" demo1 = "),a("span",{staticClass:"hljs-number"},[s._v("1")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("let")]),s._v(" demo2 = ref("),a("span",{staticClass:"hljs-number"},[s._v("2")]),s._v(")\n"),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(isRef(demo1)) "),a("span",{staticClass:"hljs-comment"},[s._v("// false")]),s._v("\n"),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(isRef(demo2)) "),a("span",{staticClass:"hljs-comment"},[s._v("// true")]),s._v("\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h4",{attrs:{id:"toref"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#toref"}},[this._v("#")]),this._v(" toRef")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" state = reactive({\n  "),a("span",{staticClass:"hljs-attr"},[s._v("foo")]),s._v(": "),a("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(",\n  "),a("span",{staticClass:"hljs-attr"},[s._v("bar")]),s._v(": "),a("span",{staticClass:"hljs-number"},[s._v("2")]),s._v(",\n})\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" fooRef = toRef(state, "),a("span",{staticClass:"hljs-string"},[s._v("'foo'")]),s._v(")\n\nfooRef.value += "),a("span",{staticClass:"hljs-number"},[s._v("1")]),s._v("\n"),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(state.foo) "),a("span",{staticClass:"hljs-comment"},[s._v("// 2")]),s._v("\n\nstate.foo += "),a("span",{staticClass:"hljs-number"},[s._v("1")]),s._v("\n"),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(fooRef.value) "),a("span",{staticClass:"hljs-comment"},[s._v("// 3")]),s._v("\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("pre",{staticClass:"hljs"},[t("code",[t("span",{staticClass:"hljs-keyword"},[this._v("export")]),this._v(" "),t("span",{staticClass:"hljs-keyword"},[this._v("default")]),this._v(" {\n  setup(props) {\n    count demo = toRef(props, "),t("span",{staticClass:"hljs-string"},[this._v("'foo'")]),this._v(")\n  },\n}\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h4",{attrs:{id:"torefs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#torefs"}},[this._v("#")]),this._v(" toRefs")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" state = reactive({\n  "),a("span",{staticClass:"hljs-attr"},[s._v("count")]),s._v(": "),a("span",{staticClass:"hljs-number"},[s._v("0")]),s._v(",\n  "),a("span",{staticClass:"hljs-attr"},[s._v("count2")]),s._v(": "),a("span",{staticClass:"hljs-number"},[s._v("1")]),s._v("\n})\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" refsState = toRefs(state)\n"),a("span",{staticClass:"hljs-comment"},[s._v("// refsState = {")]),s._v("\n"),a("span",{staticClass:"hljs-comment"},[s._v("//   count: ref(0),")]),s._v("\n"),a("span",{staticClass:"hljs-comment"},[s._v("//   count2: ref(1)")]),s._v("\n"),a("span",{staticClass:"hljs-comment"},[s._v("// }")]),s._v("\n\n"),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(state.count += "),a("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(") "),a("span",{staticClass:"hljs-comment"},[s._v("//  1")]),s._v("\n"),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(refsState.count.value += "),a("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(") "),a("span",{staticClass:"hljs-comment"},[s._v("// 2")]),s._v("\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"reactive"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#reactive"}},[this._v("#")]),this._v(" reactive")])},function(){var s=this.$createElement,t=this._self._c||s;return t("ul",[t("li",[this._v("不支持解构，解构后不是响应式数据。")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" state = reactive({\n  "),a("span",{staticClass:"hljs-attr"},[s._v("count")]),s._v(": "),a("span",{staticClass:"hljs-number"},[s._v("0")]),s._v(",\n  "),a("span",{staticClass:"hljs-attr"},[s._v("count2")]),s._v(": "),a("span",{staticClass:"hljs-number"},[s._v("1")]),s._v("\n})\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h4",{attrs:{id:"zaireactive-zhong-fang-wenref"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zaireactive-zhong-fang-wenref"}},[this._v("#")]),this._v(" 在reactive中访问ref")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" count = ref("),a("span",{staticClass:"hljs-number"},[s._v("0")]),s._v(")\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" state = reactive({ count })\n"),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(state.count) "),a("span",{staticClass:"hljs-comment"},[s._v("// 0")]),s._v("\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"computed"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#computed"}},[this._v("#")]),this._v(" computed")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("vue2.x的计算属性, 返回值也是一个"),t("code",[this._v("ref")]),this._v("。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h4",{attrs:{id:"yi-ban-shi-yong"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#yi-ban-shi-yong"}},[this._v("#")]),this._v(" 一般使用")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" count = ref("),a("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(")\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" plusOne = computed("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" =>")]),s._v(" count.value + "),a("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(")\n\n"),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(plusOne.value) "),a("span",{staticClass:"hljs-comment"},[s._v("// 2")]),s._v("\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h4",{attrs:{id:"getter-hesetter"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#getter-hesetter"}},[this._v("#")]),this._v(" getter和setter")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" count = ref("),a("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(")\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" plusOne = computed({\n  "),a("span",{staticClass:"hljs-attr"},[s._v("get")]),s._v(": "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" =>")]),s._v(" count.value + "),a("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(",\n  "),a("span",{staticClass:"hljs-attr"},[s._v("set")]),s._v(": "),a("span",{staticClass:"hljs-function"},[s._v("("),a("span",{staticClass:"hljs-params"},[s._v("val")]),s._v(") =>")]),s._v(" {\n    count.value = val - "),a("span",{staticClass:"hljs-number"},[s._v("1")]),s._v("\n  },\n})\n\nplusOne.value = "),a("span",{staticClass:"hljs-number"},[s._v("1")]),s._v("\n"),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(count.value) "),a("span",{staticClass:"hljs-comment"},[s._v("// 0")]),s._v("\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"watcheffect"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#watcheffect"}},[this._v("#")]),this._v(" watchEffect")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" count = ref("),a("span",{staticClass:"hljs-number"},[s._v("0")]),s._v(")\n\nwatchEffect("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" =>")]),s._v(" "),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(count.value))\n"),a("span",{staticClass:"hljs-comment"},[s._v("// -> 打印出 0")]),s._v("\n\nsetTimeout("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" =>")]),s._v(" {\n  count.value++\n  "),a("span",{staticClass:"hljs-comment"},[s._v("// -> 打印出 1")]),s._v("\n}, "),a("span",{staticClass:"hljs-number"},[s._v("100")]),s._v(")\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"watch"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#watch"}},[this._v("#")]),this._v(" watch")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("watch完全等效于 2.x "),t("code",[this._v("this.$watch")]),this._v("。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h4",{attrs:{id:"jian-tingreactive"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jian-tingreactive"}},[this._v("#")]),this._v(" 监听reactive")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" state = reactive({ "),a("span",{staticClass:"hljs-attr"},[s._v("count")]),s._v(": "),a("span",{staticClass:"hljs-number"},[s._v("0")]),s._v(" })\nwatch(\n  "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" =>")]),s._v(" state.count,\n  (count, prevCount) => {\n    "),a("span",{staticClass:"hljs-comment"},[s._v("/* ... */")]),s._v("\n  }\n)\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h4",{attrs:{id:"jian-tingref"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jian-tingref"}},[this._v("#")]),this._v(" 监听ref")])},function(){var s=this.$createElement,t=this._self._c||s;return t("pre",{staticClass:"hljs"},[t("code",[t("span",{staticClass:"hljs-keyword"},[this._v("const")]),this._v(" count = ref("),t("span",{staticClass:"hljs-number"},[this._v("0")]),this._v(")\nwatch(count, (count, prevCount) => {\n  "),t("span",{staticClass:"hljs-comment"},[this._v("/* ... */")]),this._v("\n})\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h4",{attrs:{id:"immediate-yudeep"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#immediate-yudeep"}},[this._v("#")]),this._v(" immediate与deep")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" count = ref("),a("span",{staticClass:"hljs-number"},[s._v("0")]),s._v(")\nwatch(\n  count,\n  (count, prevCount) => {\n    "),a("span",{staticClass:"hljs-comment"},[s._v("/* ... */")]),s._v("\n  },\n  {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("immediate")]),s._v(": "),a("span",{staticClass:"hljs-literal"},[s._v("false")]),s._v(",\n    "),a("span",{staticClass:"hljs-attr"},[s._v("deep")]),s._v(": "),a("span",{staticClass:"hljs-literal"},[s._v("null")]),s._v("\n  }\n)\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h4",{attrs:{id:"jian-ting-duo-ge-shu-ju-yuan"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jian-ting-duo-ge-shu-ju-yuan"}},[this._v("#")]),this._v(" 监听多个数据源")])},function(){var s=this.$createElement,t=this._self._c||s;return t("pre",{staticClass:"hljs"},[t("code",[this._v("watch([fooRef, barRef], ([foo, bar], [prevFoo, prevBar]) => {\n  "),t("span",{staticClass:"hljs-comment"},[this._v("/* ... */")]),this._v("\n})\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"jian-ting-qi-zhi-xing-fu-zuo-yong-shi-jian"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jian-ting-qi-zhi-xing-fu-zuo-yong-shi-jian"}},[this._v("#")]),this._v(" 监听器执行副作用时间")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-comment"},[s._v("// 同步运行")]),s._v("\nwatchEffect(\n  "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" =>")]),s._v(" {\n    "),a("span",{staticClass:"hljs-comment"},[s._v("/* ... */")]),s._v("\n  },\n  {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("flush")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'sync'")]),s._v(",\n  }\n)\n\n"),a("span",{staticClass:"hljs-comment"},[s._v("// 组件更新前执行")]),s._v("\nwatch(\n  "),a("span",{staticClass:"hljs-function"},[s._v("("),a("span",{staticClass:"hljs-params"},[s._v("demo, (newVal, oldVal, clear")]),s._v(")) =>")]),s._v(" {\n    "),a("span",{staticClass:"hljs-comment"},[s._v("/* ... */")]),s._v("\n  },\n  {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("flush")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'pre'")]),s._v(",\n    \n  }\n)\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"ting-zhi-jian-ting"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ting-zhi-jian-ting"}},[this._v("#")]),this._v(" 停止监听")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h4",{attrs:{id:"watcheffect-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#watcheffect-2"}},[this._v("#")]),this._v(" watchEffect")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" count = ref("),a("span",{staticClass:"hljs-number"},[s._v("0")]),s._v(")\n"),a("span",{staticClass:"hljs-keyword"},[s._v("let")]),s._v(" stop = watchEffect("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" =>")]),s._v(" "),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(count.value))\n"),a("span",{staticClass:"hljs-comment"},[s._v("// -> 打印出 0")]),s._v("\nstop()\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h4",{attrs:{id:"watch-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#watch-2"}},[this._v("#")]),this._v(" watch")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" count = ref("),a("span",{staticClass:"hljs-number"},[s._v("0")]),s._v(")\n"),a("span",{staticClass:"hljs-keyword"},[s._v("let")]),s._v(" stop = watch(count, (newVal, oldVal) => "),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(count.value))\n"),a("span",{staticClass:"hljs-comment"},[s._v("// -> 打印出 0")]),s._v("\nstop()\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"jian-ting-qi-nei-bu-yi-bu-chu-li"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jian-ting-qi-nei-bu-yi-bu-chu-li"}},[this._v("#")]),this._v(" 监听器内部异步处理")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h4",{attrs:{id:"watcheffect-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#watcheffect-3"}},[this._v("#")]),this._v(" watchEffect")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" count = ref("),a("span",{staticClass:"hljs-number"},[s._v("0")]),s._v(")\nwatchEffect("),a("span",{staticClass:"hljs-function"},[s._v("("),a("span",{staticClass:"hljs-params"},[s._v("onInvalidate")]),s._v(") =>")]),s._v(" {\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("let")]),s._v(" timer = setTimeout("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" =>")]),s._v(" {\n    "),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(count.value)\n  }, "),a("span",{staticClass:"hljs-number"},[s._v("1000")]),s._v(")\n\n  onInvalidate("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" =>")]),s._v(" {\n      clearTimeout(timer)\n    })\n  })\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h4",{attrs:{id:"watch-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#watch-3"}},[this._v("#")]),this._v(" watch")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" count = ref("),a("span",{staticClass:"hljs-number"},[s._v("0")]),s._v(")\nwatch(count, (newVal, oldVal, onInvalidate) => {\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("let")]),s._v(" timer = setTimeout("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" =>")]),s._v(" {\n    "),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(count.value)\n  }, "),a("span",{staticClass:"hljs-number"},[s._v("1000")]),s._v(")\n\n  onInvalidate("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" =>")]),s._v(" {\n      clearTimeout(timer)\n    })\n  })\n})\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"jian-ting-qi-kai-zhao-jie-duan-diao-shi"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jian-ting-qi-kai-zhao-jie-duan-diao-shi"}},[this._v("#")]),this._v(" 监听器开着阶段调试")])},function(){var s=this.$createElement,t=this._self._c||s;return t("ul",[t("li",[this._v("onTrack：reactive 对象属性或一个 ref 作为依赖被追踪时")]),this._v(" "),t("li",[this._v("onTrigger：依赖项变更导致副作用被触发时")]),this._v(" "),t("li",[this._v("在此阶段debugger")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[s._v("watchEffect(\n  "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" =>")]),s._v(" {\n    "),a("span",{staticClass:"hljs-comment"},[s._v("/* 副作用的内容 */")]),s._v("\n  },\n  {\n    onTrigger(e) {\n      "),a("span",{staticClass:"hljs-keyword"},[s._v("debugger")]),s._v("\n    },\n  }\n)\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" count = ref("),a("span",{staticClass:"hljs-number"},[s._v("0")]),s._v(")\nwatch(\n  count,\n  (newVal, oldVal) => {\n\n  },\n  {\n    onTrigger(e) {\n      "),a("span",{staticClass:"hljs-keyword"},[s._v("debugger")]),s._v("\n    },\n    onTrack(e) {\n      "),a("span",{staticClass:"hljs-keyword"},[s._v("debugger")]),s._v("\n    }\n)\n")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"sheng-ming-zhou-qi"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sheng-ming-zhou-qi"}},[this._v("#")]),this._v(" 生命周期")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("vue3.0的生命周期函数统一放在"),t("code",[this._v("setup")]),this._v("里面。")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" {\n  setup(props, context) {\n    onMounted("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" =>")]),s._v(" {\n      "),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),a("span",{staticClass:"hljs-string"},[s._v("'mounted!'")]),s._v(")\n    })\n    onUpdated("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" =>")]),s._v(" {\n      "),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),a("span",{staticClass:"hljs-string"},[s._v("'updated!'")]),s._v(")\n    })\n    onUnmounted("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" =>")]),s._v(" {\n      "),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),a("span",{staticClass:"hljs-string"},[s._v("'unmounted!'")]),s._v(")\n    })\n  }\n}\n")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ul",[a("li",[s._v("beforeCreate -> 使用 setup()")]),s._v(" "),a("li",[s._v("created -> 使用 setup()")]),s._v(" "),a("li",[s._v("beforeMount -> onBeforeMount")]),s._v(" "),a("li",[s._v("mounted -> onMounted")]),s._v(" "),a("li",[s._v("beforeUpdate -> onBeforeUpdate")]),s._v(" "),a("li",[s._v("updated -> onUpdated")]),s._v(" "),a("li",[s._v("beforeDestroy -> onBeforeUnmount")]),s._v(" "),a("li",[s._v("destroyed -> onUnmounted")]),s._v(" "),a("li",[s._v("errorCaptured -> onErrorCaptured")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h4",{attrs:{id:"xin-zeng-diao-shi-gou-zi"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#xin-zeng-diao-shi-gou-zi"}},[this._v("#")]),this._v(" 新增调试钩子")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("可在次钩子内"),t("code",[this._v("debugger")]),this._v("调试同监听器的onTrack和onTrigger类似。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("ul",[t("li",[this._v("onRenderTracked(DebuggerEvent)")]),this._v(" "),t("li",[this._v("onRenderTriggered(DebuggerEvent)")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"yi-lai-zhu-ruprovide-heinject"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#yi-lai-zhu-ruprovide-heinject"}},[this._v("#")]),this._v(" 依赖注入provide和inject")])},function(){var s=this.$createElement,t=this._self._c||s;return t("ul",[t("li",[this._v("功能类似Vue2.x 的 provide/inject")]),this._v(" "),t("li",[this._v("只能在当前活动组件实例的 setup() 中调用")]),this._v(" "),t("li",[this._v("可共享普通数据，也可共享ref类响应式数据")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" Ancestor = {\n  setup() {\n    provide("),a("span",{staticClass:"hljs-string"},[s._v("'themeColor'")]),s._v(", "),a("span",{staticClass:"hljs-string"},[s._v("'dark'")]),s._v(")\n  },\n}\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" Descendent = {\n  setup() {\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" theme = inject("),a("span",{staticClass:"hljs-string"},[s._v("'themeColor'")]),s._v(", "),a("span",{staticClass:"hljs-string"},[s._v("'light'")]),s._v(") "),a("span",{staticClass:"hljs-comment"},[s._v("// light为默认值，当provide中未提供值时使用")]),s._v("\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" {\n      theme\n    }\n  },\n}\n")])])}]};var e={data:function(){return{}},mounted:function(){},components:{Markdown:a("VU/8")(null,n,!1,function(s){a("ow0z")},"data-v-3f86106f",null).exports}},i={render:function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"markdown"},[t("Markdown")],1)},staticRenderFns:[]};var l=a("VU/8")(e,i,!1,function(s){a("loTB")},"data-v-168d2878",null);t.default=l.exports},loTB:function(s,t){},ow0z:function(s,t,a){var n=a("6UlS");"string"==typeof n&&(n=[[s.i,n,""]]),n.locals&&(s.exports=n.locals);a("rjj0")("5a8647c3",n,!0,{})}});