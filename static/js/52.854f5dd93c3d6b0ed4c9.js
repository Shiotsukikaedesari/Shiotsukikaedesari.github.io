webpackJsonp([52],{"2zfo":function(t,e){},W2rT:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("Dd8w"),r=i.n(s),a=i("NYxO"),n=i("AkSr"),o=i("QLyc"),h=i("BMSc"),l=i("Ml+6"),c=function(){var t=/^[og]\s*(.+)?/,e=/^mtllib /,i=/^usemtl /,s=/^usemap /;function r(t){l.w.call(this,t),this.materials=null}return r.prototype=Object.assign(Object.create(l.w.prototype),{constructor:r,load:function(t,e,i,s){var r=this,a=new l.m(r.manager);a.setPath(this.path),a.load(t,function(t){e(r.parse(t))},i,s)},setMaterials:function(t){return this.materials=t,this},parse:function(r){var a=new function(){var t={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(t,e){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=t,void(this.object.fromDeclaration=!1!==e);var i=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:!1!==e,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(t,e){var i=this._finalize(!1);i&&(i.inherited||i.groupCount<=0)&&this.materials.splice(i.index,1);var s={index:this.materials.length,name:t||"",mtllib:Array.isArray(e)&&e.length>0?e[e.length-1]:"",smooth:void 0!==i?i.smooth:this.smooth,groupStart:void 0!==i?i.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(t){var e={index:"number"==typeof t?t:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return e.clone=this.clone.bind(e),e}};return this.materials.push(s),s},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(t){var e=this.currentMaterial();if(e&&-1===e.groupEnd&&(e.groupEnd=this.geometry.vertices.length/3,e.groupCount=e.groupEnd-e.groupStart,e.inherited=!1),t&&this.materials.length>1)for(var i=this.materials.length-1;i>=0;i--)this.materials[i].groupCount<=0&&this.materials.splice(i,1);return t&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),e}},i&&i.name&&"function"==typeof i.clone){var s=i.clone(0);s.inherited=!0,this.object.materials.push(s)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(t,e){var i=parseInt(t,10);return 3*(i>=0?i-1:i+e/3)},parseNormalIndex:function(t,e){var i=parseInt(t,10);return 3*(i>=0?i-1:i+e/3)},parseUVIndex:function(t,e){var i=parseInt(t,10);return 2*(i>=0?i-1:i+e/2)},addVertex:function(t,e,i){var s=this.vertices,r=this.object.geometry.vertices;r.push(s[t+0],s[t+1],s[t+2]),r.push(s[e+0],s[e+1],s[e+2]),r.push(s[i+0],s[i+1],s[i+2])},addVertexPoint:function(t){var e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addVertexLine:function(t){var e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addNormal:function(t,e,i){var s=this.normals,r=this.object.geometry.normals;r.push(s[t+0],s[t+1],s[t+2]),r.push(s[e+0],s[e+1],s[e+2]),r.push(s[i+0],s[i+1],s[i+2])},addColor:function(t,e,i){var s=this.colors,r=this.object.geometry.colors;r.push(s[t+0],s[t+1],s[t+2]),r.push(s[e+0],s[e+1],s[e+2]),r.push(s[i+0],s[i+1],s[i+2])},addUV:function(t,e,i){var s=this.uvs,r=this.object.geometry.uvs;r.push(s[t+0],s[t+1]),r.push(s[e+0],s[e+1]),r.push(s[i+0],s[i+1])},addUVLine:function(t){var e=this.uvs;this.object.geometry.uvs.push(e[t+0],e[t+1])},addFace:function(t,e,i,s,r,a,n,o,h){var l=this.vertices.length,c=this.parseVertexIndex(t,l),p=this.parseVertexIndex(e,l),u=this.parseVertexIndex(i,l);if(this.addVertex(c,p,u),this.colors.length>0&&this.addColor(c,p,u),void 0!==s&&""!==s){var d=this.uvs.length;c=this.parseUVIndex(s,d),p=this.parseUVIndex(r,d),u=this.parseUVIndex(a,d),this.addUV(c,p,u)}if(void 0!==n&&""!==n){var m=this.normals.length;c=this.parseNormalIndex(n,m),p=n===o?c:this.parseNormalIndex(o,m),u=n===h?c:this.parseNormalIndex(h,m),this.addNormal(c,p,u)}},addPointGeometry:function(t){this.object.geometry.type="Points";for(var e=this.vertices.length,i=0,s=t.length;i<s;i++)this.addVertexPoint(this.parseVertexIndex(t[i],e))},addLineGeometry:function(t,e){this.object.geometry.type="Line";for(var i=this.vertices.length,s=this.uvs.length,r=0,a=t.length;r<a;r++)this.addVertexLine(this.parseVertexIndex(t[r],i));var n=0;for(a=e.length;n<a;n++)this.addUVLine(this.parseUVIndex(e[n],s))}};return t.startObject("",!1),t};-1!==r.indexOf("\r\n")&&(r=r.replace(/\r\n/g,"\n")),-1!==r.indexOf("\\\n")&&(r=r.replace(/\\\n/g,""));for(var n=r.split("\n"),o="",h="",c=[],p="function"==typeof"".trimLeft,u=0,d=n.length;u<d;u++)if(o=n[u],0!==(o=p?o.trimLeft():o.trim()).length&&"#"!==(h=o.charAt(0)))if("v"===h){var m=o.split(/\s+/);switch(m[0]){case"v":a.vertices.push(parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3])),m.length>=7&&a.colors.push(parseFloat(m[4]),parseFloat(m[5]),parseFloat(m[6]));break;case"vn":a.normals.push(parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3]));break;case"vt":a.uvs.push(parseFloat(m[1]),parseFloat(m[2]))}}else if("f"===h){for(var g=o.substr(1).trim().split(/\s+/),f=[],b=0,x=g.length;b<x;b++){var v=g[b];if(v.length>0){var w=v.split("/");f.push(w)}}var B=f[0];for(b=1,x=f.length-1;b<x;b++){var L=f[b],y=f[b+1];a.addFace(B[0],L[0],y[0],B[1],L[1],y[1],B[2],L[2],y[2])}}else if("l"===h){var j=o.substring(1).trim().split(" "),E=[],M=[];if(-1===o.indexOf("/"))E=j;else for(var C=0,H=j.length;C<H;C++){var k=j[C].split("/");""!==k[0]&&E.push(k[0]),""!==k[1]&&M.push(k[1])}a.addLineGeometry(E,M)}else if("p"===h){var O=o.substr(1).trim().split(" ");a.addPointGeometry(O)}else if(null!==(c=t.exec(o))){var T=(" "+c[0].substr(1).trim()).substr(1);a.startObject(T)}else if(i.test(o))a.object.startMaterial(o.substring(7).trim(),a.materialLibraries);else if(e.test(o))a.materialLibraries.push(o.substring(7).trim());else if(s.test(o))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===h){if((c=o.split(" ")).length>1){var F=c[1].trim().toLowerCase();a.object.smooth="0"!==F&&"off"!==F}else a.object.smooth=!0;(Y=a.object.currentMaterial())&&(Y.smooth=a.object.smooth)}else{if("\0"===o)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+o+'"')}a.finalize();var R=new l.r;R.materialLibraries=[].concat(a.materialLibraries);for(u=0,d=a.objects.length;u<d;u++){var S=a.objects[u],P=S.geometry,I=S.materials,A="Line"===P.type,V="Points"===P.type,z=!1;if(0!==P.vertices.length){var _=new l.c;_.setAttribute("position",new l.n(P.vertices,3)),P.normals.length>0?_.setAttribute("normal",new l.n(P.normals,3)):_.computeVertexNormals(),P.colors.length>0&&(z=!0,_.setAttribute("color",new l.n(P.colors,3))),P.uvs.length>0&&_.setAttribute("uv",new l.n(P.uvs,2));for(var U,G=[],D=0,J=I.length;D<J;D++){var N=(Z=I[D]).name+"_"+Z.smooth+"_"+z,Y=a.materials[N];if(null!==this.materials)if(Y=this.materials.create(Z.name),!A||!Y||Y instanceof l.t){if(V&&Y&&!(Y instanceof l.L)){var W=new l.L({size:10,sizeAttenuation:!1});l.z.prototype.copy.call(W,Y),W.color.copy(Y.color),W.map=Y.map,Y=W}}else{var K=new l.t;l.z.prototype.copy.call(K,Y),K.color.copy(Y.color),Y=K}void 0===Y&&((Y=A?new l.t:V?new l.L({size:1,sizeAttenuation:!1}):new l.D).name=Z.name,Y.flatShading=!Z.smooth,Y.vertexColors=z?l._0:l.F,a.materials[N]=Y),G.push(Y)}if(G.length>1){for(D=0,J=I.length;D<J;D++){var Z=I[D];_.addGroup(Z.groupStart,Z.groupCount,D)}U=A?new l.u(_,G):V?new l.K(_,G):new l.B(_,G)}else U=A?new l.u(_,G[0]):V?new l.K(_,G[0]):new l.B(_,G[0]);U.name=S.name,R.add(U)}}return R}}),r}(),p=function(t){l.w.call(this,t)};p.prototype=Object.assign(Object.create(l.w.prototype),{constructor:p,load:function(t,e,i,s){var r=this,a=""===this.path?l.x.extractUrlBase(t):this.path,n=new l.m(this.manager);n.setPath(this.path),n.load(t,function(t){e(r.parse(t,a))},i,s)},setMaterialOptions:function(t){return this.materialOptions=t,this},parse:function(t,e){for(var i=t.split("\n"),s={},r=/\s+/,a={},n=0;n<i.length;n++){var o=i[n];if(0!==(o=o.trim()).length&&"#"!==o.charAt(0)){var h=o.indexOf(" "),l=h>=0?o.substring(0,h):o;l=l.toLowerCase();var c=h>=0?o.substring(h+1):"";if(c=c.trim(),"newmtl"===l)s={name:c},a[c]=s;else if("ka"===l||"kd"===l||"ks"===l||"ke"===l){var u=c.split(r,3);s[l]=[parseFloat(u[0]),parseFloat(u[1]),parseFloat(u[2])]}else s[l]=c}}var d=new p.MaterialCreator(this.resourcePath||e,this.materialOptions);return d.setCrossOrigin(this.crossOrigin),d.setManager(this.manager),d.setMaterials(a),d}}),(p.MaterialCreator=function(t,e){this.baseUrl=t||"",this.options=e,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:l.p,this.wrap=this.options&&this.options.wrap?this.options.wrap:l.P}).prototype={constructor:p.MaterialCreator,crossOrigin:"anonymous",setCrossOrigin:function(t){return this.crossOrigin=t,this},setManager:function(t){this.manager=t},setMaterials:function(t){this.materialsInfo=this.convert(t),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(t){if(!this.options)return t;var e={};for(var i in t){var s=t[i],r={};for(var a in e[i]=r,s){var n=!0,o=s[a],h=a.toLowerCase();switch(h){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(o=[o[0]/255,o[1]/255,o[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===o[0]&&0===o[1]&&0===o[2]&&(n=!1)}n&&(r[h]=o)}}return e},preload:function(){for(var t in this.materialsInfo)this.create(t)},getIndex:function(t){return this.nameLookup[t]},getAsArray:function(){var t=0;for(var e in this.materialsInfo)this.materialsArray[t]=this.create(e),this.nameLookup[e]=t,t++;return this.materialsArray},create:function(t){return void 0===this.materials[t]&&this.createMaterial_(t),this.materials[t]},createMaterial_:function(t){var e=this,i=this.materialsInfo[t],s={name:t,side:this.side};function r(t,i){if(!s[t]){var r,a,n=e.getTextureParams(i,s),o=e.loadTexture((r=e.baseUrl,"string"!=typeof(a=n.url)||""===a?"":/^https?:\/\//i.test(a)?a:r+a));o.repeat.copy(n.scale),o.offset.copy(n.offset),o.wrapS=e.wrap,o.wrapT=e.wrap,s[t]=o}}for(var a in i){var n,o=i[a];if(""!==o)switch(a.toLowerCase()){case"kd":s.color=(new l.e).fromArray(o);break;case"ks":s.specular=(new l.e).fromArray(o);break;case"ke":s.emissive=(new l.e).fromArray(o);break;case"map_kd":r("map",o);break;case"map_ks":r("specularMap",o);break;case"map_ke":r("emissiveMap",o);break;case"norm":r("normalMap",o);break;case"map_bump":case"bump":r("bumpMap",o);break;case"map_d":r("alphaMap",o),s.transparent=!0;break;case"ns":s.shininess=parseFloat(o);break;case"d":(n=parseFloat(o))<1&&(s.opacity=n,s.transparent=!0);break;case"tr":n=parseFloat(o),this.options&&this.options.invertTrProperty&&(n=1-n),n>0&&(s.opacity=1-n,s.transparent=!0)}}return this.materials[t]=new l.D(s),this.materials[t]},getTextureParams:function(t,e){var i,s={scale:new l.Y(1,1),offset:new l.Y(0,0)},r=t.split(/\s+/);return(i=r.indexOf("-bm"))>=0&&(e.bumpScale=parseFloat(r[i+1]),r.splice(i,2)),(i=r.indexOf("-s"))>=0&&(s.scale.set(parseFloat(r[i+1]),parseFloat(r[i+2])),r.splice(i,4)),(i=r.indexOf("-o"))>=0&&(s.offset.set(parseFloat(r[i+1]),parseFloat(r[i+2])),r.splice(i,4)),s.url=r.join(" ").trim(),s},loadTexture:function(t,e,i,s,r){var a,n=void 0!==this.manager?this.manager:l.i,o=n.getHandler(t);return null===o&&(o=new l.U(n)),o.setCrossOrigin&&o.setCrossOrigin(this.crossOrigin),a=o.load(t,i,s,r),void 0!==e&&(a.mapping=e),a}};var u={data:function(){return{renderer:"",scene:"",camera:"",stats:"",helperBox:"",lightBox:"",managerBox:"",objBox:{stage:"",box:""},gui:"",clock:"",orbitControls:"",animationFrame:""}},methods:r()({init:function(){this.initRender(),this.initScene(),this.initCamera(),this.initClock(),this.initManager(),this.initLoader(),this.initObj(),this.initLight(),this.initHelper(),this.initStats(),this.initOrbitControls(),this.initGui(),this.updateRenderer()},initRender:function(){this.renderer=new THREE.WebGLRenderer({antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=THREE.PCFSoftShadowMap,this.$refs["three-canvas"].appendChild(this.renderer.domElement),this.renderer.setClearColor("rgb(15, 1, 25)")},initScene:function(){this.scene=new THREE.Scene},initClock:function(){this.clock=new THREE.Clock},initLight:function(){this.lightBox={ambientLight:new THREE.AmbientLight("rgb(50, 50, 50)"),spotLight:new THREE.SpotLight("rgb(255, 255, 255)",1.5,800,Math.PI/180*45,.3,0)},this.lightBox.spotLight.position.set(300,600,300),this.lightBox.spotLight.castShadow=!0,this.scene.add(this.lightBox.spotLight),this.scene.add(this.lightBox.ambientLight)},initCamera:function(){this.camera=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,1e4),this.camera.position.x=600,this.camera.position.y=800,this.camera.position.z=600,this.camera.up.x=0,this.camera.up.y=1,this.camera.up.z=0},initManager:function(){var t=this,e=this,i=0,s=function(s,r){r.onStart=function(t,r,a){i+=60;var n=new THREE.BoxBufferGeometry(300,40,40,4,4),o=new THREE.MeshStandardMaterial({color:"rgb(125, 255, 255)",roughness:0,metalness:0});e.objBox[s]=new THREE.Mesh(n,o),e.objBox[s].castShadow=!0,e.objBox[s].receiveShadow=!0,e.objBox[s].position.set(0,i,0),e.objBox[s].scale.x=.01,e.scene.add(e.objBox[s]),e.objBox[s+"BoxLine"]=new THREE.LineSegments(new THREE.EdgesGeometry(n),new THREE.LineBasicMaterial({color:16777215})),e.objBox[s+"BoxLine"].position.set(0,i,0),e.scene.add(e.objBox[s+"BoxLine"])},r.onLoad=function(){e.scene.remove(e.objBox[s]),e.clearObjCache(e.objBox[s]),e.scene.remove(e.objBox[s+"BoxLine"]),e.clearObjCache(e.objBox[s+"BoxLine"])},r.onProgress=function(t,e,i){},r.onError=function(e){t.objBox.degesBox.material.color.setHex("rgb(255, 0, 0)")}};this.managerBox={OBJManager:new THREE.LoadingManager,MTLManager:new THREE.LoadingManager},s("OBJManager",this.managerBox.OBJManager),s("MTLManager",this.managerBox.MTLManager)},initLoader:function(){var t=this,e=this,i=new c(this.managerBox.OBJManager);new p(this.managerBox.MTLManager).load("/static/three/obj/knife/knife.mtl",function(s){i.setMaterials(s),i.load("/static/three/obj/knife/knife.obj",function(e){e.scale.set(.5,.5,.5),e.translateY(140),e.translateX(50),e.rotateZ(Math.PI/180*60),e.children.forEach(function(t){t.castShadow=!0,t.receiveShadow=!0}),t.objBox.knife=e,t.scene.add(t.objBox.knife)},function(t){e.objBox.OBJManager.scale.x=t.loaded/t.total})},function(t){e.objBox.MTLManager.scale.x=t.loaded/t.total})},initObj:function(){var t=new THREE.BoxGeometry(300,10,300,4,4),e=new THREE.MeshLambertMaterial({color:"rgb(45, 0, 50)"});this.objBox.stage=new THREE.Mesh(t,e),this.objBox.stage.castShadow=!0,this.objBox.stage.receiveShadow=!0,this.objBox.stage.position.set(0,5,0),this.scene.add(this.objBox.stage)},initHelper:function(){this.helperBox={axesHelper:{helper:new THREE.AxesHelper(1e4)},gridHelper:{helper:new THREE.GridHelper(1500,30,"white","rgb(150, 150, 150)")},spotLightHelper:{helper:new THREE.SpotLightHelper(this.lightBox.spotLight)}},this.scene.add(this.helperBox.spotLightHelper.helper)},initStats:function(){this.stats=new o.a,this.stats.setMode(0),this.stats.domElement.id="three-stats",this.stats.domElement.style.position="absolute",this.stats.domElement.style.left="unset",this.stats.domElement.style.right="0px",this.stats.domElement.style.top="0px",document.body.appendChild(this.stats.domElement)},initGui:function(){var t=this;this.gui=new n.a,this.guiParam={showHelper:!0,castShadow:this.lightBox.spotLight.castShadow,color:this.lightBox.spotLight.color.getHex(),intensity:this.lightBox.spotLight.intensity,distance:this.lightBox.spotLight.distance,angle:180*this.lightBox.spotLight.angle/Math.PI,penumbra:this.lightBox.spotLight.penumbra,decay:this.lightBox.spotLight.decay,positionY:this.lightBox.spotLight.position.y};var e=this.gui.addFolder("Light setting");e.add(this.guiParam,"showHelper").onChange(function(e){e?t.scene.add(t.helperBox.spotLightHelper.helper):t.scene.remove(t.helperBox.spotLightHelper.helper)}),e.add(this.guiParam,"castShadow").onChange(function(e){t.lightBox.spotLight.castShadow=e}),e.addColor(this.guiParam,"color",-500,500).onChange(function(e){t.lightBox.spotLight.color.setHex(e),t.helperBox.spotLightHelper.helper.update()}),e.add(this.guiParam,"intensity",0,10).onChange(function(e){t.lightBox.spotLight.intensity=e,t.helperBox.spotLightHelper.helper.update()}),e.add(this.guiParam,"distance",0,1e3,1).onChange(function(e){t.lightBox.spotLight.distance=e,t.helperBox.spotLightHelper.helper.update()}),e.add(this.guiParam,"angle",0,60,1).onChange(function(e){t.lightBox.spotLight.angle=Math.PI/180*e,t.helperBox.spotLightHelper.helper.update()}),e.add(this.guiParam,"penumbra",0,1,.1).onChange(function(e){t.lightBox.spotLight.penumbra=e,t.helperBox.spotLightHelper.helper.update()}),e.add(this.guiParam,"decay",0,5,.1).onChange(function(e){t.lightBox.spotLight.decay=e,t.helperBox.spotLightHelper.helper.update()}),e.open();var i=this.gui.addFolder("Light position");i.add(this.guiParam,"positionY",-500,500,1).onChange(function(e){t.lightBox.spotLight.position.y=e,t.helperBox.spotLightHelper.helper.update()}),i.open()},initOrbitControls:function(){this.orbitControls=new h.a(this.camera,this.renderer.domElement),this.orbitControls.autoRotate=!0,this.orbitControls.target=new THREE.Vector3(0,250,0)},animation:function(){var t=.001*Date.now();this.lightBox.spotLight.position.x=400*-Math.cos(t),this.lightBox.spotLight.position.z=400*Math.sin(t),this.helperBox.spotLightHelper.helper.update()},updateRenderer:function(){this.orbitControls.update(this.clock.getDelta()),this.renderer.render(this.scene,this.camera),this.animation(),this.stats.update(),this.animationFrame=requestAnimationFrame(this.updateRenderer)},clearObjCache:function(t){t.geometry.dispose(),t.material.dispose()},clearCache:function(){var t=this;this.renderer.dispose(),this.renderer.forceContextLoss(),this.renderer.clear(!0,!0,!0),this.renderer.domElement=null,this.scene.dispose(),this.clearObjCache(this.objBox.stage),this.objBox.knife.children.forEach(function(e){t.clearObjCache(e)}),this.gui.destroy()}},Object(a.b)(["resetThreeTipsFun","resetThreeLinkFun"])),created:function(){this.resetThreeTipsFun("    旋转相机：鼠标左键\n    缩放场景：鼠标滚轮\n    移动相机：鼠标右键\n    模型提供：hcity "),this.resetThreeLinkFun("loader/loadingManager.vue")},beforeMount:function(){},mounted:function(){this.init()},beforeDestroy:function(){document.body.removeChild(document.getElementById("three-stats")),this.clearCache(),this.renderer=null,this.scene=null,this.camera=null,this.stats=null,this.helperBox=null,this.managerBox=null,this.objBox=null,this.clock=null,this.orbitControls=null,cancelAnimationFrame(this.animationFrame)}},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"three-display three-init"},[e("div",{ref:"three-canvas",staticClass:"three-canvas",attrs:{id:"three-canvas"}})])},staticRenderFns:[]};var m=i("VU/8")(u,d,!1,function(t){i("2zfo")},"data-v-10c3e8d4",null);e.default=m.exports}});